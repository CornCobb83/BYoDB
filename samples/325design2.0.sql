DROP TABLE DELIVERY CASCADE CONSTRAINTS;

DROP TABLE TRANSACTIONS CASCADE CONSTRAINTS;

DROP TABLE MEMBER_DATE CASCADE CONSTRAINTS;

DROP TABLE MEMBER_EMAILS CASCADE CONSTRAINTS;

DROP TABLE RENTAL CASCADE CONSTRAINTS;

DROP TABLE CUSTOMER CASCADE CONSTRAINTS;

DROP TABLE EMPLOYEE_DEPT CASCADE CONSTRAINTS;

DROP TABLE MANAGER_DEPT CASCADE CONSTRAINTS;

DROP TABLE EMPLOYEE_MANAGER CASCADE CONSTRAINTS;

DROP TABLE MEMBERS CASCADE CONSTRAINTS;

DROP TABLE PHYSICAL_ITEM CASCADE CONSTRAINTS;

DROP TABLE DIGITAL_ITEM CASCADE CONSTRAINTS;

DROP TABLE ITEM CASCADE CONSTRAINTS;

DROP TABLE STORE CASCADE CONSTRAINTS;

DROP TABLE DEPARTMENT CASCADE CONSTRAINTS;

DROP TABLE EMPLOYEE CASCADE CONSTRAINTS;

DROP TABLE MANAGER CASCADE CONSTRAINTS;

CREATE TABLE MANAGER (
  MANAGER_ID integer PRIMARY KEY,
  YRS_EXP integer,
  MGR_FNAME varchar2(30)
);

CREATE TABLE EMPLOYEE (
  EMPL_ID integer PRIMARY KEY,
  EMPL_FNAME varchar2(15),
  EMPL_LNAME varchar2(15),
  VACATION_DAYS integer,
  SALARY integer
);

CREATE TABLE DEPARTMENT (
  DEPT_ID integer PRIMARY KEY,
  DEPT_NAME varchar2(15)
);

CREATE TABLE STORE (
  STORE_TYPE varchar2(15) PRIMARY KEY,
  STORE_EMAIL varchar2(30),
  STORE_PHONE_NUM integer
);

CREATE TABLE ITEM (
  ITEM_ID integer PRIMARY KEY,
  ITEM_TYPE varchar2(15),
  GENRE varchar2(15),
  ITEM_PRICE decimal,
  RELEASE_DATE date
);

CREATE TABLE DIGITAL_ITEM (
  ITEM_ID integer PRIMARY KEY,
  FILE_TYPE varchar2(4),
  FILE_SIZE integer
);

CREATE TABLE PHYSICAL_ITEM (
  ITEM_ID integer PRIMARY KEY,
  ITEM_FORMAT varchar2(10),
  ITEM_SIZE decimal
);

CREATE TABLE MEMBERS (
  MEMBER_ID integer PRIMARY KEY,
  PHONE_NUMBER integer,
  FAVORITE_GENRE varchar2(15),
  BIRTHDAY date
);

CREATE TABLE EMPLOYEE_MANAGER (
  EMPL_ID integer,
  MANAGER_ID integer,
  PRIMARY KEY (EMPL_ID, MANAGER_ID),
  FOREIGN KEY (EMPL_ID) REFERENCES EMPLOYEE(EMPL_ID),
  FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER(MANAGER_ID)
);

CREATE TABLE MANAGER_DEPT (
  MANAGER_ID integer,
  DEPT_ID integer,
  PRIMARY KEY (MANAGER_ID, DEPT_ID),
  FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER(MANAGER_ID),
  FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENT(DEPT_ID)
);

CREATE TABLE EMPLOYEE_DEPT (
  EMPL_ID integer,
  DEPT_ID integer,
  PRIMARY KEY (EMPL_ID, DEPT_ID),
  FOREIGN KEY (EMPL_ID) REFERENCES EMPLOYEE(EMPL_ID),
  FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENT(DEPT_ID)
);

CREATE TABLE CUSTOMER (
  CUSTOMER_ID integer PRIMARY KEY,
  MEMBER_ID integer,
  PHONE_NUMBER integer,
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE RENTAL (
  RENTAL_ID integer PRIMARY KEY,
  PURCHASE_DATE date,
  RETURN_BY_DATE date,
  ITEM_ID integer,
  MEMBER_ID integer,
  FOREIGN KEY (ITEM_ID) REFERENCES ITEM(ITEM_ID),
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE MEMBER_EMAILS (
  MEMBER_ID integer,
  EMAIL varchar2(30),
  PRIMARY KEY (MEMBER_ID, EMAIL),
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE MEMBER_DATE (
  MEMBER_ID integer,
  DATE_JOINED date,
  PRIMARY KEY (MEMBER_ID, DATE_JOINED),
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE TRANSACTIONS (
  TRANSACTION_ID integer PRIMARY KEY,
  ITEM_ID integer,
  CUSTOMER_ID integer,
  TRANSACTION_DATE date,
  EMPL_ID integer,
  FOREIGN KEY (ITEM_ID) REFERENCES ITEM(ITEM_ID),
  FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
  FOREIGN KEY (EMPL_ID) REFERENCES EMPLOYEE(EMPL_ID)
);

CREATE TABLE DELIVERY (
  DEL_ID integer PRIMARY KEY,
  DEL_CARRIER varchar2(15),
  DEL_COST decimal,
  DATE_SHIPPED date,
  TRANSACTION_ID integer,
  STORE_TYPE varchar2(15),
  FOREIGN KEY (TRANSACTION_ID) REFERENCES TRANSACTIONS(TRANSACTION_ID),
  FOREIGN KEY (STORE_TYPE) REFERENCES STORE(STORE_TYPE)
);