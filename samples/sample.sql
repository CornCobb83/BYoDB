CREATE TABLE MANAGER (
  MANAGER_ID INTEGER PRIMARY KEY,
  YRS_EXP INTEGER
);

CREATE TABLE MANAGER_DEPT (
  MANAGER_ID INTEGER,
  DEPT_ID INTEGER,
  PRIMARY KEY (MANAGER_ID, DEPT_ID),
  FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER(MANAGER_ID),
  FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENT(DEPT_ID)
);

CREATE TABLE EMPLOYEE (
  EMPL_ID INTEGER PRIMARY KEY,
  EMPL_FNAME VARCHAR,
  EMPL_LNAME VARCHAR,
  VACATION_DAYS INTEGER,
  SALARY INTEGER
);

CREATE TABLE EMPLOYEE_MANAGER (
  EMPL_ID INTEGER,
  MANAGER_ID INTEGER,
  PRIMARY KEY (EMPL_ID, MANAGER_ID),
  FOREIGN KEY (EMPL_ID) REFERENCES EMPLOYEE(EMPL_ID),
  FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER(MANAGER_ID)
);

CREATE TABLE DEPARTMENT (
  DEPT_ID INTEGER PRIMARY KEY,
  DEPT_NAME VARCHAR
);

CREATE TABLE EMPLOYEE_DEPT (
  EMPL_ID INTEGER,
  DEPT_ID INTEGER,
  PRIMARY KEY (EMPL_ID, DEPT_ID),
  FOREIGN KEY (EMPL_ID) REFERENCES EMPLOYEE(EMPL_ID),
  FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENT(DEPT_ID)
);

CREATE TABLE STORE (
  STORE_TYPE VARCHAR PRIMARY KEY,
  STORE_EMAIL VARCHAR,
  STORE_PHONE_NUM INTEGER
);

CREATE TABLE ITEM (
  ITEM_ID INTEGER PRIMARY KEY,
  ITEM_TYPE VARCHAR,
  GENRE VARCHAR,
  ITEM_PRICE DECIMAL,
  RELEASE_DATE DATE
);

CREATE TABLE DIGITAL_ITEM (
  ITEM_ID INTEGER PRIMARY KEY,
  FILE_TYPE VARCHAR,
  FILE_SIZE INTEGER
);

CREATE TABLE PHYSICAL_ITEM (
  ITEM_ID INTEGER PRIMARY KEY,
  ITEM_FORMAT VARCHAR,
  ITEM_SIZE DECIMAL
);

CREATE TABLE MEMBERS (
  MEMBER_ID INTEGER PRIMARY KEY,
  PHONE_NUMBER INTEGER,
  FAVORITE_GENRE VARCHAR,
  BIRTHDAY DATE
);

CREATE TABLE CUSTOMER (
  CUSTOMER_ID INTEGER PRIMARY KEY,
  MEMBER_ID INTEGER,
  PHONE_NUMBER INTEGER,
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE MEMBER_DATE (
  MEMBER_ID INTEGER,
  DATE_JOINED DATE,
  PRIMARY KEY (MEMBER_ID, DATE_JOINED),
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE MEMBER_EMAILS (
  MEMBER_ID INTEGER,
  EMAIL VARCHAR,
  PRIMARY KEY (MEMBER_ID, EMAIL),
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE RENTAL (
  RENTAL_ID INTEGER PRIMARY KEY,
  PURCHASE_DATE DATE,
  RETURN_BY_DATE DATE,
  ITEM_ID INTEGER,
  MEMBER_ID INTEGER,
  FOREIGN KEY (ITEM_ID) REFERENCES ITEM(ITEM_ID),
  FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID)
);

CREATE TABLE TRANSACTIONS (
  TRANSACTION_ID INTEGER PRIMARY KEY,
  ITEM_ID INTEGER,
  CUSTOMER_ID INTEGER,
  TRANSACTION_DATE DATE,
  EMPL_ID INTEGER,
  FOREIGN KEY (ITEM_ID) REFERENCES ITEM(ITEM_ID),
  FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
  FOREIGN KEY (EMPL_ID) REFERENCES EMPLOYEE(EMPL_ID)
);

CREATE TABLE DELIVERY (
  DEL_ID INTEGER PRIMARY KEY,
  DEL_CARRIER VARCHAR,
  DEL_COST DECIMAL(5,2),
  DATE_SHIPPED DATE,
  TRANSACTION_ID INTEGER,
  STORE_TYPE VARCHAR,
  FOREIGN KEY (TRANSACTION_ID) REFERENCES TRANSACTIONS(TRANSACTION_ID),
  FOREIGN KEY (STORE_TYPE) REFERENCES STORE(STORE_TYPE)
);

CREATE TABLE ITEM_UPDATE_AUDIT (
  UPDATE_ID NUMBER PRIMARY KEY,
  ITEM_ID INTEGER,
  OLD_ITEM_TYPE VARCHAR,
  NEW_ITEM_TYPE VARCHAR,
  OLD_GENRE VARCHAR,
  NEW_GENRE VARCHAR,
  OLD_PRICE DECIMAL,
  NEW_PRICE DECIMAL,
  OLD_DATE DATE,
  NEW_DATE DATE,
  UPDATED_AT DATE
);