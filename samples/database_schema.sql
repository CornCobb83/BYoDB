DROP TABLE PRODUCT_REVIEWS CASCADE CONSTRAINTS;

DROP TABLE ORDER_ITEMS CASCADE CONSTRAINTS;

DROP TABLE PRODUCTS CASCADE CONSTRAINTS;

DROP TABLE ADDRESSES CASCADE CONSTRAINTS;

DROP TABLE ORDERS CASCADE CONSTRAINTS;

DROP TABLE CATEGORIES CASCADE CONSTRAINTS;

DROP TABLE USERS CASCADE CONSTRAINTS;

CREATE TABLE USERS (
  ID INT PRIMARY KEY,
  USERNAME VARCHAR2(50),
  EMAIL VARCHAR2(100),
  PASSWORD_HASH VARCHAR2(128),
  CREATED_AT DATE
);

CREATE TABLE CATEGORIES (
  ID INT PRIMARY KEY,
  NAME VARCHAR2(50),
  DESCRIPTION VARCHAR2(255)
);

CREATE TABLE ORDERS (
  ID INT PRIMARY KEY,
  USER_ID INT,
  ORDER_DATE DATE,
  STATUS VARCHAR2(20),
  TOTAL NUMBER(10, 2),
  FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

CREATE TABLE ADDRESSES (
  ID INT PRIMARY KEY,
  USER_ID INT,
  STREET VARCHAR2(100),
  CITY VARCHAR2(50),
  STATE VARCHAR2(20),
  ZIP_CODE VARCHAR2(10),
  COUNTRY VARCHAR2(50),
  FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

CREATE TABLE PRODUCTS (
  ID INT PRIMARY KEY,
  NAME VARCHAR2(100),
  DESCRIPTION CLOB,
  PRICE NUMBER(10, 2),
  CATEGORY_ID INT,
  STOCK INT,
  FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES(ID)
);

CREATE TABLE ORDER_ITEMS (
  ID INT PRIMARY KEY,
  ORDER_ID INT,
  PRODUCT_ID INT,
  QUANTITY INT,
  PRICE_EACH NUMBER(10, 2),
  FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ID),
  FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID)
);

CREATE TABLE PRODUCT_REVIEWS (
  ID INT PRIMARY KEY,
  USER_ID INT,
  PRODUCT_ID INT,
  RATING INT,
  COMMENT CLOB,
  REVIEW_DATE DATE,
  FOREIGN KEY (USER_ID) REFERENCES USERS(ID),
  FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID)
);